<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>

<canvas id="demoCanvas" width="1000" height="480">
        	alternate crap for junk ass users
</canvas>


<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script type="text/javascript" src="js/lib/easeljs/utils/UID.js"></script>
<script type="text/javascript" src="js/lib/easeljs/geom/Matrix2D.js"></script>
<script type="text/javascript" src="js/lib/easeljs/events/EventDispatcher.js"></script>
<script type="text/javascript" src="js/lib/easeljs/display/DisplayObject.js"></script>
<script type="text/javascript" src="js/lib/easeljs/display/Container.js"></script>
<script type="text/javascript" src="js/lib/easeljs/display/Stage.js"></script>
<script type="text/javascript" src="js/lib/easeljs/events/MouseEvent.js"></script>
<script type="text/javascript" src="js/lib/easeljs/display/Bitmap.js"></script>
<script type="text/javascript" src="js/lib/easeljs/display/Graphics.js"></script>
<script type="text/javascript" src="js/lib/easeljs/display/Shape.js"></script>
<script type="text/javascript" src="js/lib/easeljs/geom/Rectangle.js"></script>
<script type="text/javascript" src="js/lib/easeljs/utils/Ticker.js"></script>
<script type="text/javascript" src="js/lib/easeljs/filters/Filter.js"></script>
<script type="text/javascript" src="js/lib/easeljs/filters/BoxBlurFilter.js"></script>
<script type="text/javascript" src="js/lib/easeljs/filters/ColorMatrixFilter.js"></script>
<script type="text/javascript" src="js/lib/easeljs/filters/ColorMatrix.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.10.1/TweenMax.min.js"></script>

<script>

    var canvas, stage, star

    var scale;
	var angle;
    var puzzleImage;
    var startX = 0;
    var startY = 0;
    var totalRows = 9;
    var totalCols = 9;
    var paddingX = 32;
    var paddingY = 32;

    $(document).ready(function() {
        canvas = document.getElementById("demoCanvas");
        stage = new createjs.Stage(canvas);

        var container = new createjs.Container();
        stage.addChild(container);

        puzzleImage = new Image();
        puzzleImage.src = "img/jig.jpg";
        puzzleImage.onload = puzzleLoaded;
        angle = 0;

        function puzzleLoaded()
        {
            var colCounter = 0;
			var posIdx = 0;
            var rowType = -1;

            for (rowCounter = 0; rowCounter < totalRows; rowCounter++)
			{
                for (colCounter = 0; colCounter <  totalCols; colCounter++)
                {
                    //keep track of rows:
                    (rowType >= 2) ? rowType = 0 : rowType++;

                    var shape = new createjs.Shape();
                    shape.graphics = new createjs.Graphics().beginStroke("rgba(255,255,255,1)").beginBitmapFill(puzzleImage).drawCircle(20, 10, 10).endStroke();

                    var bitmap = new createjs.Bitmap(puzzleImage);
                   // bitmap.filters = [new createjs.ColorMatrixFilter(new createjs.ColorMatrix(Math.random(),0,Math.random(),1))];
                   // bitmap.cache(0, 0, puzzleImage.width, puzzleImage.height)
                    bitmap.sourceRect = new createjs.Rectangle(startX + startX + (colCounter * paddingX), startY + (rowCounter * paddingY), 30, 30);

                    bitmap.x = startX + startX + (colCounter * paddingX);
                    bitmap.y = rowCounter * paddingY;

                   // bitmap.mask = shape;

                    // wrapper function to provide scope for the event handlers:
                    (function(target) {
                        bitmap.onPress = function(evt) {
                            // bump the target in front of it's siblings:
                            container.addChild(target);
                            var offset = {x:target.x-evt.stageX, y:target.y-evt.stageY};

                            // add a handler to the event object's onMouseMove callback
                            // this will be active until the user releases the mouse button:
                            evt.onMouseMove = function(ev) {
                                target.x = ev.stageX+offset.x;
                                target.y = ev.stageY+offset.y;
                                // indicate that the stage should be updated on the next tick:
                                update = true;
                            }
                        }
                        bitmap.onMouseOver = function() {
                            target.scaleX = target.scaleY = target.scale*1.2;
                            update = true;
                        }
                        bitmap.onMouseOut = function() {
                            target.scaleX = target.scaleY = target.scale;
                            update = true;
                        }

                    })(bitmap);

                    stage.addChild( bitmap);
                    shape.x = bitmap.x;
                    shape.y = bitmap.y;

                    posIdx++;
                }
			}
            createjs.Ticker.addEventListener("tick", tick);
        }

        function tick(event)
        {
            stage.update(event);
             /* var ctx = stage.canvas.getContext("2d");
            ctx.save();

            ctx.drawImage(puzzleImage, 90, 130, 50, 60, 10, 10, 50, 60)

            //container.addChild(bitmap);


            $(ctx).on("click", function(e){
                console.log("sdf")
            })*/
	    }
    });

</script>

</body>
</html>